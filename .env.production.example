# ================================
# Rápido Sur - Production Environment Variables
# ================================
# INSTRUCCIONES PARA DOKPLOY:
# 1. Copia este archivo y renómbralo a .env (sin .production.example)
# 2. Reemplaza TODOS los valores marcados con <CAMBIAR_AQUI>
# 3. Configura este .env en Dokploy Environment Variables
# 4. Dokploy hará el deploy automáticamente con Docker
# ================================

# ================================
# Application
# ================================
NODE_ENV=production
PORT=3000

# ================================
# Database (PostgreSQL)
# ================================
# IMPORTANTE: Cambia la contraseña de la base de datos
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=<CAMBIAR_AQUI_PASSWORD_SEGURO>
DB_DATABASE=rapido_sur

# ================================
# JWT Authentication
# ================================
# CRÍTICO: Genera un JWT_SECRET seguro con este comando:
# openssl rand -base64 64 | tr -d '\n'
#
# O usa el script: npm run secrets:generate
#
# El secret DEBE:
#   - Tener al menos 64 caracteres
#   - NO contener 'dev_' o 'secret_key'
#   - Ser completamente aleatorio
#
# Ejemplo de secret seguro:
# JWT_SECRET=sK9xQm7vP2Lz8nR4wF6jH1cY3tB5mN0pD9gV7sX4eA2qW8oI6uE1rT3yU5iO7pL0kJ9hG8fD6sA4zX2cV1bN3mM=
#
JWT_SECRET=<CAMBIAR_AQUI_GENERAR_CON_OPENSSL>
JWT_EXPIRATION=24h

# ================================
# CORS Configuration
# ================================
# IMPORTANTE: Cambia a tu dominio de producción
# Ejemplos:
#   - https://rapidosur.com
#   - https://app.rapidosur.cl
#   - https://mantenimiento.rapidosur.com
FRONTEND_URL=<CAMBIAR_AQUI_TU_DOMINIO_FRONTEND>

# ================================
# Email Configuration (Gmail)
# ================================
# IMPORTANTE: Usa una App Password de Gmail (no tu contraseña normal)
# Cómo obtener App Password: https://support.google.com/accounts/answer/185833
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=<CAMBIAR_AQUI_TU_EMAIL@gmail.com>
MAIL_PASSWORD=<CAMBIAR_AQUI_APP_PASSWORD_DE_GMAIL>
MAIL_FROM=noreply@rapidosur.cl

# ================================
# Maintenance Alerts
# ================================
# Email del jefe de mantenimiento que recibirá las alertas
MAINTENANCE_MANAGER_EMAIL=<CAMBIAR_AQUI_EMAIL_JEFE_MANTENIMIENTO>
ENABLE_CRON=true
ALERTS_CRON_SCHEDULE=0 6 * * *

# ================================
# Seeding (SOLO primera vez)
# ================================
# IMPORTANTE: Deja en false después del primer deploy
# Solo ponlo en true si necesitas crear usuarios de prueba
ENABLE_SEEDING=false

# ================================
# Logging
# ================================
# Niveles: error, warn, log, debug, verbose
# Producción: usa 'log' o 'warn'
LOG_LEVEL=log

# ================================
# Rate Limiting
# ================================
# Limita requests para prevenir abuso
# TTL en milisegundos (60000 = 1 minuto)
# LIMIT = número de requests permitidos por TTL
THROTTLE_TTL=60000
THROTTLE_LIMIT=100

# ================================
# Frontend (Next.js)
# ================================
# IMPORTANTE: Debe ser la URL completa del backend con /api
# Ejemplos:
#   - https://api.rapidosur.com/api
#   - https://backend.rapidosur.cl/api
#   - http://tu-servidor-ip:3000/api
NEXT_PUBLIC_API_URL=<CAMBIAR_AQUI_TU_URL_BACKEND>/api

# ================================
# CHECKLIST ANTES DE DEPLOY
# ================================
# [ ] DB_PASSWORD cambiado
# [ ] JWT_SECRET generado con openssl (mínimo 64 caracteres)
# [ ] FRONTEND_URL configurado con tu dominio
# [ ] MAIL_USER y MAIL_PASSWORD configurados (Gmail App Password)
# [ ] MAINTENANCE_MANAGER_EMAIL configurado
# [ ] NEXT_PUBLIC_API_URL configurado con tu dominio backend
# [ ] NODE_ENV=production
# [ ] ENABLE_SEEDING=false (después del primer deploy)
# ================================
